<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- Todo o seu cabeçalho (meta, title, links, etc.) continua o mesmo... -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mega-Sena Dicas - Gere palpites exclusivos e aumente suas chances de ganhar</title>
    <!-- ...outras tags meta... -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;500&display=swap" rel="stylesheet">
    <!-- ...outros scripts e links... -->

    <style>
        /* Todos os seus estilos :root, body, h1, etc. continuam os mesmos... */
        :root {
            --cor-fundo: linear-gradient(180deg, #0d47a1, #1976d2, #42a5f5);
            --cor-caixa: rgba(255,255,255,0.08);
            --cor-texto: #E0E0E0;
            --cor-dourado: #FFD700;
            --cor-dourado-hover: #FFAA00;
            --sombra-dourada: 0 0 12px rgba(255, 215, 0, 0.4);
            --sombra-caixa: 0 8px 25px rgba(0, 0, 0, 0.5);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--cor-fundo);
            color: var(--cor-texto);
            display: flex;
            justify-content: center;
            padding: 2rem 1rem;
            min-height: 100vh;
        }
        .container {
            max-width: 600px;
            width: 100%;
            background: var(--cor-caixa);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--sombra-caixa);
            text-align: center;
        }
        /* ...Todos os outros estilos até o final... */

        /* --- ESTILOS ADICIONADOS PARA O TOGGLE --- */
        .secao-filtro {
            margin: 1.5rem 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        .secao-filtro label {
            font-size: 1rem;
            font-weight: 500;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--cor-dourado);
        }
        input:checked + .slider:before {
            transform: translateX(22px);
        }
        /* --- FIM DOS ESTILOS DO TOGGLE --- */

    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="logotipo.jpg" alt="Logotipo Mega-Sena Dicas com trevo da sorte" class="imagem-ouro" loading="lazy">
            <h1>Mega-Sena Dicas</h1>
            <p class="subtitulo">Acredite na sua sorte!</p>   
        </header>

        <main>
            <!-- ÁREA DO TOGGLE ADICIONADA -->
            <section class="secao-filtro">
                <label for="filtro-toggle">Usar filtros de frequência</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="filtro-toggle" checked>
                    <span class="slider"></span>
                </label>
            </section>
            
            <section class="secao-botoes">
                <h2>Escolha a dica:</h2>
                <div class="grupo-botoes">
                    <button class="botao-gerar" onclick="gerarJogos(1)" aria-label="Gerar 1 dica">1 Dica</button>
                    <button class="botao-gerar" onclick="gerarJogos(5)" aria-label="Gerar 5 dicas">5 Dicas</button>
                    <button class="botao-gerar" onclick="gerarJogos(10)" aria-label="Gerar 10 dicas">10 Dicas</button>
                </div>
            </section>

            <section id="area-resultados" aria-live="polite" aria-atomic="true"></section>
        </main>

        <!-- Todo o seu footer continua o mesmo -->
        <footer class="page-footer">
            <!-- ...conteúdo do sobre, links, contato... -->
        </footer>
    </div>

    <script>
        // A função ajustarEspacamento continua a mesma...
        function ajustarEspacamento() { /* ...código igual... */ }
        window.addEventListener('load', ajustarEspacamento);
        window.addEventListener('resize', ajustarEspacamento);

        // --- FUNÇÃO GERARJOGOS MODIFICADA ---
        async function gerarJogos(quantidade) {
            const areaResultados = document.getElementById('area-resultados');
            areaResultados.innerHTML = '<h2 class="titulo-sugestoes">Gerando...</h2>';

            // Pega o estado atual do botão toggle (true se ligado, false se desligado)
            const filtroAtivado = document.getElementById('filtro-toggle').checked;

            try {
                // Adiciona o estado do filtro como um parâmetro na URL da API
                const response = await fetch(`/get-games/${quantidade}?filtro=${filtroAtivado}`);
                if (!response.ok) {
                    throw new Error(`Erro do servidor: ${response.statusText}`);
                }
                const jogos = await response.json();
                
                // O resto da função continua igual...
                areaResultados.innerHTML = '<h2 class="titulo-sugestoes">Suas dicas, boa sorte!:</h2>';
                jogos.forEach(linha => {
                    const jogoContainer = document.createElement('div');
                    jogoContainer.className = 'jogo';
                    const numerosContainer = document.createElement('div');
                    numerosContainer.className = 'numeros-container';
                    linha.trim().split(/\s+/).forEach(num => {
                        const divNumero = document.createElement('div');
                        divNumero.className = 'numero';
                        divNumero.textContent = num;
                        numerosContainer.appendChild(divNumero);
                    });
                    jogoContainer.appendChild(numerosContainer);
                    areaResultados.appendChild(jogoContainer);
                });
                
                ajustarEspacamento();

            } catch (error) {
                areaResultados.innerHTML = `<p style="color:red;">Erro: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>