<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        
        <!-- ============== METADADOS E SEO ============== -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Analise retrospectivamente seus números da loteria em todos os sorteios históricos e organize suas apostas. Ferramenta gratuita para Mega-Sena, Quina, Lotofácil e mais.">
        <meta name="keywords" content="analisador loterias, organizador apostas, mega-sena, quina, lotofácil, análise histórica loteria, resultados loteria">

        <meta name="google-site-verification" content="EgyoXsWWVGCKSqeXLnr9I4mJPvUGsLR5DDpNWP8wLKM" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://sorteanalisada.com.br/simulador">
        <meta property="og:title" content="Analisador e Organizador de Loterias - Sorte Analisada">
        <meta property="og:description" content="Analise seus números em sorteios históricos e organize suas apostas em Mega-Sena, Quina, Lotofácil e mais. Ferramenta gratuita de análise retrospectiva.">
        <meta property="og:image" content="https://sorteanalisada.com.br/static/images/logotipo.jpg">
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">
        <meta property="og:locale" content="pt_BR">
        <meta property="og:site_name" content="Sorte Analisada">

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:url" content="https://sorteanalisada.com.br/simulador">
        <meta name="twitter:title" content="Analisador e Organizador de Loterias - Sorte Analisada">
        <meta name="twitter:description" content="Analise seus números em sorteios históricos e organize suas apostas em Mega-Sena, Quina, Lotofácil e mais.">
        <meta name="twitter:image" content="https://sorteanalisada.com.br/static/images/twitter-card.jpg">

        <!-- Canonical -->
        <link rel="canonical" href="https://sorteanalisada.com.br/simulador">

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-PPB7LRV5SJ"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-PPB7LRV5SJ');
        </script>
        
        <!-- Estrutura de dados Schema.org -->
        <script type="application/ld+json">
        {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Analisador de Loterias - Sorte Analisada",
        "description": "Analise seus jogos nas principais loterias brasileiras"
        }
        </script>
        
        <title>Analisador e Organizador de Loterias | Sorte Analisada</title>
        <link rel="icon" href="/static/images/logotipo.png" type="image/png">
        
        <!-- Fontes e Scripts Externos -->
         <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9963024999857816"crossorigin="anonymous"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        
        <!-- ============== ESTILOS CSS DA PÁGINA ============== -->
        <link rel="stylesheet" href="static/css/styles.css">

        <style>
            /* Variáveis de Tema */
            :root {
                --cor-fundo: linear-gradient(180deg, #020f2c, #0d47a1, #1976d2);
                --cor-caixa: rgba(255, 255, 255, 0.08);
                --cor-texto: #E0E0E0;
                --cor-dourado: #FFD700;
                --cor-dourado-hover: #FFAA00;
                --cor-loteria-display: #81d4fa;
                --sombra-dourada: 0 0 12px rgba(255, 215, 0, 0.4);
                --sombra-caixa: 0 8px 25px rgba(0, 0, 0, 0.5);
                --cor-divisoria-ouro: rgba(255, 215, 0, 0.3);
                --cor-sucesso: #4CAF50;
                --cor-erro: #f44336;
                --cor-aviso: #ff9800;
            }

            /* Reset e Base */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                scroll-behavior: smooth;
            }

            body {
                font-family: 'Poppins', sans-serif;
                background: var(--cor-fundo);
                color: var(--cor-texto);
                margin: 0;
                padding: 20px 0;
                display: flex;
                justify-content: center;
                align-items: flex-start;
                min-height: 100vh;
            }

            .container {
                background: var(--cor-caixa);
                backdrop-filter: blur(10px);
                border-radius: 16px;
                box-shadow: var(--sombra-caixa);
                padding: 2rem;
                max-width: 1000px;
                width: 95%;
                text-align: center;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            /* Tipografia */
            h1, h2, h3, h4 {
                font-family: 'Orbitron', sans-serif;
            }

            h1 {
                font-size: 2.2rem;
                color: var(--cor-dourado);
                text-transform: uppercase;
                letter-spacing: 1.5px;
                margin-bottom: 0.5rem;
            }

            .subtitulo {
                font-size: 1.6rem;
                font-weight: 400;
                margin-bottom: 0;
                color: #bbdefb;
            }

            /* Navegação */
            .nav-interna {
                padding: 1.5rem 0;
                margin: 1rem 0;
                border-top: 1px solid var(--cor-divisoria-ouro);
                border-bottom: 1px solid var(--cor-divisoria-ouro);
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }

            .nav-interna a {
                color: var(--cor-dourado);
                text-decoration: none;
                font-size: 1.1rem;
                font-weight: 500;
                transition: color 0.2s;
            }

            .nav-interna a:hover {
                color: var(--cor-dourado-hover);
            }

            /* Imagens */
            .imagem-ouro {
                background-color: #FFF8E1;
                padding: 8px;
                border-radius: 10px;
                width: 150px;
                height: auto;
                border: 3px solid var(--cor-dourado);
                box-shadow: var(--sombra-dourada);
                transition: transform 0.3s ease;
            }

            /* Botões */
            .botao-gerar, .botao-simular, .botao-gerar-fechamento {
                background: linear-gradient(145deg, var(--cor-dourado), var(--cor-dourado-hover));
                color: #000;
                border: none;
                padding: 0.8rem 1.5rem;
                font-size: 1.1rem;
                font-weight: 700;
                border-radius: 40px;
                cursor: pointer;
                transition: all 0.3s ease-in-out;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                gap: 10px;
                margin: 0.5rem;
            }

            .botao-gerar:hover:not(:disabled),
            .botao-simular:hover:not(:disabled),
            .botao-gerar-fechamento:hover:not(:disabled) {
                transform: translateY(-3px);
                box-shadow: 0 6px 15px rgba(255, 215, 0, 0.4);
            }

            .botao-gerar:disabled,
            .botao-simular:disabled,
            .botao-gerar-fechamento:disabled {
                cursor: not-allowed;
                opacity: 0.6;
                transform: none;
            }

            /* Controles */
            .secao-controles {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 1.5rem;
                flex-wrap: wrap;
                margin: 2.5rem 0;
            }

            .controle-item {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .seletor-custom {
                background-color: rgba(0, 0, 0, 0.3);
                color: var(--cor-dourado);
                padding: 8px 12px;
                border: 1px solid var(--cor-dourado);
                border-radius: 8px;
                font-size: 1.1rem;
                cursor: pointer;
            }

            /* Seletor de Números */
            .numero-grid {
                display: grid;
                grid-template-columns: repeat(10, 1fr);
                gap: 8px;
                margin: 2rem 0;
                max-width: 600px;
                margin-left: auto;
                margin-right: auto;
            }

            .numero-botao {
                background: rgba(255, 255, 255, 0.1);
                border: 2px solid rgba(255, 255, 255, 0.3);
                color: var(--cor-texto);
                padding: 10px 5px;
                border-radius: 8px;
                cursor: pointer;
                font-weight: bold;
                font-size: 1rem;
                transition: all 0.2s ease;
                min-height: 45px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .numero-botao:hover {
                background: rgba(255, 255, 255, 0.2);
                border-color: var(--cor-dourado);
            }

            .numero-botao.selecionado {
                background: var(--cor-dourado);
                border-color: var(--cor-dourado);
                color: #000;
                box-shadow: var(--sombra-dourada);
            }

            .numero-botao:disabled {
                opacity: 0.3;
                cursor: not-allowed;
            }

            /* Contador */
            .contador-dezenas {
                font-size: 1.3rem;
                font-weight: bold;
                color: var(--cor-dourado);
                margin: 1rem 0;
                padding: 0.8rem;
                background: rgba(0, 0, 0, 0.2);
                border-radius: 8px;
                border-left: 4px solid var(--cor-dourado);
            }

            /* Resultados da Simulação */
            .resultado-simulacao {
                margin-top: 2rem;
                padding: 1.5rem;
                background: rgba(0, 0, 0, 0.2);
                border-radius: 12px;
                border-left: 4px solid var(--cor-sucesso);
            }

            .tabela-resultados {
                width: 100%;
                border-collapse: collapse;
                margin-top: 1rem;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 8px;
                overflow: hidden;
            }

            .tabela-resultados th,
            .tabela-resultados td {
                padding: 12px;
                text-align: center;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .tabela-resultados th {
                background: rgba(0, 0, 0, 0.3);
                color: var(--cor-dourado);
                font-weight: bold;
            }

            .tabela-resultados tr:nth-child(even) {
                background: rgba(255, 255, 255, 0.02);
            }

            /* Resumo da Simulação */
            .resumo-simulacao {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin: 2rem 0;
            }

            .card-resumo {
                background: rgba(0, 0, 0, 0.2);
                padding: 1.5rem;
                border-radius: 12px;
                border-top: 4px solid var(--cor-dourado);
                text-align: center;
            }

            .card-resumo h4 {
                color: var(--cor-dourado);
                margin-bottom: 0.5rem;
                font-size: 1.1rem;
            }

            .card-resumo .numero-destaque {
                font-size: 2rem;
                font-weight: bold;
                color: var(--cor-sucesso);
                display: block;
                margin: 0.5rem 0;
            }

            /* Seções */
            .secao {
                margin: 3rem 0;
                padding: 2rem 0;
                border-top: 1px solid var(--cor-divisoria-ouro);
            }

            .secao:first-of-type {
                border-top: none;
            }

            .secao h2 {
                color: var(--cor-dourado);
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }

            /* Sistema de Fechamento */
            .fechamento-resultado {
                margin-top: 2rem;
                padding: 1.5rem;
                background: rgba(0, 0, 0, 0.2);
                border-radius: 12px;
                border-left: 4px solid var(--cor-dourado);
            }

            .jogo-fechamento {
                background: rgba(255, 255, 255, 0.05);
                padding: 1rem;
                margin: 0.5rem 0;
                border-radius: 8px;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap;
                gap: 5px;
            }

            .numero-jogo {
                font-size: 1.2rem;
                font-weight: bold;
                color: var(--cor-dourado);
                padding: 0.3rem 0.6rem;
                background: rgba(255, 215, 0, 0.1);
                border-radius: 4px;
                margin: 2px;
            }

            /* Loading */
            .loading {
                display: none;
                justify-content: center;
                align-items: center;
                padding: 2rem;
            }

            .spinner {
                width: 50px;
                height: 50px;
                border: 4px solid rgba(255, 215, 0, 0.3);
                border-left: 4px solid var(--cor-dourado);
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* === OTIMIZAÇÃO MOBILE === */
            @media (max-width: 768px) {
                .container {
                    padding: 1rem;
                    margin: 0.5rem;
                    width: calc(100% - 1rem);
                }

                h1 {
                    font-size: 1.6rem;
                    line-height: 1.3;
                }

                .subtitulo {
                    font-size: 1.1rem;
                }

                /* Grid de números mais compacto */
                .numero-grid {
                    grid-template-columns: repeat(8, 1fr);
                    gap: 4px;
                    margin: 1rem 0;
                }

                .numero-botao {
                    padding: 8px 2px;
                    font-size: 0.85rem;
                    min-height: 35px;
                    border-radius: 6px;
                }

                /* Controles em coluna */
                .secao-controles {
                    flex-direction: column;
                    gap: 1rem;
                    margin: 1.5rem 0;
                }

                .controle-item {
                    justify-content: space-between;
                    width: 100%;
                }

                /* Botões em bloco */
                .botao-gerar, .botao-simular, .botao-gerar-fechamento {
                    width: 100%;
                    justify-content: center;
                    margin: 0.25rem 0;
                    padding: 1rem;
                    font-size: 1rem;
                }

                /* Tabelas responsivas */
                .tabela-resultados {
                    font-size: 0.8rem;
                    display: block;
                    overflow-x: auto;
                    white-space: nowrap;
                }

                .tabela-resultados th,
                .tabela-resultados td {
                    padding: 8px 4px;
                }

                /* Cards em coluna única */
                .resumo-simulacao {
                    grid-template-columns: 1fr;
                    gap: 0.8rem;
                }

                .card-resumo {
                    padding: 1rem;
                }

                .card-resumo .numero-destaque {
                    font-size: 1.5rem;
                }

                /* Navegação otimizada */
                .nav-interna {
                    flex-direction: column;
                    gap: 10px;
                    padding: 1rem 0;
                }

                .nav-interna a {
                    padding: 0.5rem;
                    text-align: center;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 6px;
                }

                /* Jogos do fechamento com scroll horizontal */
                .jogo-fechamento {
                    overflow-x: auto;
                    justify-content: flex-start;
                    padding: 0.8rem;
                }

                .numero-jogo {
                    font-size: 0.9rem;
                    padding: 0.2rem 0.4rem;
                    flex-shrink: 0;
                }
            }

            @media (max-width: 480px) {
                .container {
                    padding: 0.8rem;
                }

                h1 {
                    font-size: 1.4rem;
                }

                /* Grid ainda mais compacto */
                .numero-grid {
                    grid-template-columns: repeat(6, 1fr);
                    gap: 3px;
                }

                .numero-botao {
                    padding: 6px 1px;
                    font-size: 0.75rem;
                    min-height: 32px;
                }

                /* Textos menores mas legíveis */
                .contador-dezenas {
                    font-size: 1rem;
                    padding: 0.6rem;
                }

                /* Otimizar tabelas para mobile muito pequeno */
                .tabela-resultados {
                    font-size: 0.75rem;
                }

                /* Melhorar touch targets */
                .numero-botao {
                    min-height: 44px; /* Tamanho mínimo para touch */
                }

                button {
                    min-height: 44px; /* Apple Human Interface Guidelines */
                }
            }

            /* === MELHORIAS DE ACESSIBILIDADE MOBILE === */
            @media (max-width: 768px) {
                /* Melhorar contraste para uso externo */
                .numero-botao {
                    border-width: 2px;
                }
                
                /* Feedback visual melhor para touch */
                .numero-botao:active {
                    transform: scale(0.95);
                    transition: transform 0.1s;
                }
                
                /* Prevenir zoom indesejado em inputs */
                select, input, button {
                    font-size: 16px; /* Previne zoom no iOS */
                }
            }

            /* === ORIENTAÇÃO LANDSCAPE === */
            @media (max-width: 768px) and (orientation: landscape) {
                .numero-grid {
                    grid-template-columns: repeat(10, 1fr);
                }
                
                .container {
                    padding: 0.5rem;
                }
                
                h1 {
                    font-size: 1.3rem;
                    margin-bottom: 0.3rem;
                }
            }

            /* Melhorias para a seção de explicações */
            .card-resumo p {
                text-align: left;
                font-size: 0.95rem;
                line-height: 1.5;
                margin: 0;
            }

            .card-resumo strong {
                color: var(--cor-dourado);
            }

            .voltar-topo {
                color: var(--cor-dourado);
                text-decoration: none;
                font-weight: 500;
                display: inline-block;
                margin-top: 1rem;
                transition: color 0.3s;
            }

            .voltar-topo:hover {
                color: var(--cor-dourado-hover);
            }

            /* Responsividade para a seção */
            @media (max-width: 768px) {
                #explicacao-funcionalidades .card-resumo {
                    padding: 1rem;
                }
                
                #explicacao-funcionalidades h3 {
                    font-size: 1.3rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header>
                <picture>
                    <a href="/" title="Voltar para a página inicial Sorte Analisada">
                    <source srcset="/static/images/logotipo.webp">
                    <img src="/static/images/logotipo.png" alt="Sorte Analisada - Gerador de Números para Loterias" class="imagem-ouro" width="128" height="131" loading="eager" fetchpriority="high">
                    </a>
                </picture>

                <h1>Analisador - Sorte Analisada</h1>
                <p class="subtitulo">Descubra quantos acertos seus números teriam tido nos sorteios passados!</p>
            </header>

                <nav class="nav-interna">
                    <a href="/">Principal</a>
                    <a href="#analisador">Analisador</a>
                    <a href="#organizador">Organizador</a>
                    <a href="/blog">Blog</a> 
                </nav>
            <main>
                <!-- Seção Analisador -->
                <section id="analisador" class="secao">
                    <h2>Analisador de Resultados Históricos</h2>
                    <p>Selecione sua loteria, escolha seus números e veja quantos acertos teriam ocorrido nos resultados anteriores!</p>

                    <div class="secao-controles">
                        <div class="controle-item">
                            <label for="loteria-simulador">Loteria:</label>
                            <select id="loteria-simulador" class="seletor-custom">
                                <option value="megasena">Mega-Sena</option>
                                <option value="quina">Quina</option>
                                <option value="lotofacil">Lotofácil</option>
                                <option value="diadesorte">Dia de Sorte</option>
                                <option value="duplasena">Dupla Sena</option>
                                <option value="lotomania">Lotomania</option>
                            </select>
                        </div>
                    </div>

                    <div class="contador-dezenas" id="contador-simulador">
                        Selecione seus números: 0 de 6 escolhidos
                    </div>

                    <div id="grid-numeros-simulador" class="numero-grid">
                        <!-- Números serão gerados dinamicamente -->
                    </div>

                    <div style="margin: 2rem 0;">
                        <button id="btn-simular" class="botao-simular" disabled>
                            <i class="fas fa-chart-bar"></i>
                            Analisar Histórico
                        </button>
                        <button id="btn-limpar-simulador" class="botao-gerar">
                            <i class="fas fa-eraser"></i>
                            Limpar Seleção
                        </button>
                    </div>

                    <div class="loading" id="loading-simulador">
                        <div class="spinner"></div>
                    </div>

                    <div id="resultado-simulacao" style="display: none;"></div>
                </section>

                <!-- Seção Organizador -->
                <section id="organizador" class="secao">
                    <h2>Organizador de Jogos</h2>
                    <p>Organize seus números favoritos em até 10 jogos diferentes para facilitar suas apostas!</p>

                    <div class="secao-controles">
                        <div class="controle-item">
                            <label for="loteria-fechamento">Loteria:</label>
                            <select id="loteria-fechamento" class="seletor-custom">
                                <option value="megasena">Mega-Sena</option>
                                <option value="quina">Quina</option>
                                <option value="lotofacil">Lotofácil</option>
                                <option value="diadesorte">Dia de Sorte</option>
                                <option value="duplasena">Dupla Sena</option>
                            </select>
                        </div>
                    </div>

                    <div class="contador-dezenas" id="contador-fechamento">
                        Selecione seus números favoritos: 0 escolhidos
                    </div>

                    <div id="grid-numeros-fechamento" class="numero-grid">
                        <!-- Números serão gerados dinamicamente -->
                    </div>

                    <div style="margin: 2rem 0;">
                        <button id="btn-gerar-fechamento" class="botao-gerar-fechamento" disabled>
                            <i class="fas fa-layer-group"></i>
                            Organizar em 10 Jogos
                        </button>
                        <button id="btn-limpar-fechamento" class="botao-gerar">
                            <i class="fas fa-eraser"></i>
                            Limpar Seleção
                        </button>
                    </div>

                    <div class="loading" id="loading-fechamento">
                        <div class="spinner"></div>
                    </div>

                    <div id="resultado-fechamento" style="display: none;"></div>
                </section>

                <div class="destaque-gerador">
                    <h2>🎲 Gere Suas Combinações!</h2>
                    <p>Use o gerador de números do <strong>Sorte Analisada</strong> para criar combinações baseadas em dados históricos da Mega-Sena, Quina, Lotofácil, Dia de Sorte, Dupla Sena e Lotomania.</p>
                    <a href="/" class="cta-gerador">
                        <i class="fa-solid fa-dice"></i> Sorte Analisada<br> Gere suas Dezenas Agora
                    </a>
                </div>

                <!-- Seção Explicação das Funcionalidades -->
                <section id="explicacao-funcionalidades" class="secao">
                    <h2>🎯 Como Funcionam Nossas Ferramentas</h2>
                    <p>Entenda o que cada ferramenta faz:</p>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
                        
                        <!-- Analisador -->
                        <div class="card-resumo" style="border-top-color: #2196F3;">
                            <h4 style="color: #2196F3; margin-bottom: 1rem;">📊 Analisador de Resultados</h4>
                            <p style="text-align: left; font-size: 0.95rem; line-height: 1.4;">
                                <strong>O que faz:</strong> Compara seus números com todos os sorteios históricos da loteria escolhida.<br><br>
                                <strong>Como funciona:</strong> Verifica quantos números da sua seleção coincidiram com cada resultado passado.<br><br>
                                <strong>Utilidade:</strong> Satisfaz a curiosidade sobre o desempenho retrospectivo de números específicos. Não prevê resultados futuros.
                            </p>
                        </div>

                        <!-- Organizador -->
                        <div class="card-resumo" style="border-top-color: #4CAF50;">
                            <h4 style="color: #4CAF50; margin-bottom: 1rem;">🔢 Organizador de Jogos</h4>
                            <p style="text-align: left; font-size: 0.95rem; line-height: 1.4;">
                                <strong>O que faz:</strong> Distribui seus números favoritos em até 10 jogos diferentes.<br><br>
                                <strong>Como funciona:</strong> Cria combinações variadas usando os números que você selecionou.<br><br>
                                <strong>Utilidade:</strong> Facilita a organização de múltiplas apostas. Não aumenta probabilidade de vitória.
                            </p>
                        </div>
                    </div>

                    <!-- Como funciona o Organizador -->
                    <div style="background: rgba(0, 0, 0, 0.2); padding: 1.5rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid var(--cor-dourado);">
                        <h3 style="color: var(--cor-dourado); margin-bottom: 1rem;">⚙️ Funcionamento do Organizador</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="padding: 1rem; background: rgba(33, 150, 243, 0.1); border-radius: 8px; text-align: center;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🎲</div>
                                <strong style="color: #2196F3;">Distribuição Variada</strong><br>
                                <small>Cria jogos diferentes entre si</small>
                            </div>
                            <div style="padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px; text-align: center;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">⚖️</div>
                                <strong style="color: #4CAF50;">Cobertura Equilibrada</strong><br>
                                <small>Tenta usar todos os números escolhidos</small>
                            </div>
                            <div style="padding: 1rem; background: rgba(255, 152, 0, 0.1); border-radius: 8px; text-align: center;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">📋</div>
                                <strong style="color: #FF9800;">Organização Prática</strong><br>
                                <small>Facilita preenchimento de volantes</small>
                            </div>
                        </div>

                        <p style="font-size: 0.9rem; margin: 0; opacity: 0.9;">
                            <strong>Exemplo:</strong> Se você selecionar 15 números para Mega-Sena, o sistema gerará 10 jogos de 6 números cada, 
                            distribuindo suas escolhas entre eles. Isso não altera as probabilidades matemáticas de vitória.
                        </p>
                    </div>

                    <!-- Por que 10 Jogos? -->
                    <div style="background: rgba(156, 39, 176, 0.1); padding: 1.5rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid #9C27B0;">
                        <h3 style="color: #ecec0b; margin-bottom: 1rem;">❓ Por que Limitamos a 10 Jogos?</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #FFD700;">💰</div>
                                <strong>Controle de Gastos</strong><br>
                                <small>Limita investimento por rodada</small>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #FFD700;">⚡</div>
                                <strong>Performance</strong><br>
                                <small>Processamento rápido</small>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #FFD700;">📱</div>
                                <strong>Praticidade</strong><br>
                                <small>Fácil visualização mobile</small>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #FFD700;">🎯</div>
                                <strong>Foco</strong><br>
                                <small>Evita excesso de combinações</small>
                            </div>
                        </div>
                    </div>

                    <!-- Dicas de Uso -->
                    <div style="background: rgba(255, 193, 7, 0.1); padding: 1.5rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid #FFC107;">
                        <h3 style="color: #f8bb03; margin-bottom: 1rem;">💡 Dicas de Uso</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <div>
                                <strong style="color: #FFC107;">Analisador:</strong>
                                <ul style="margin: 0.5rem 0; padding-left: 1.2rem;">
                                    <li>Compare diferentes conjuntos de números</li>
                                    <li>Veja padrões de frequência histórica</li>
                                    <li>Use como referência estatística</li>
                                </ul>
                            </div>
                            <div>
                                <strong style="color: #FFC107;">Organizador:</strong>
                                <ul style="margin: 0.5rem 0; padding-left: 1.2rem;">
                                    <li>Selecione até 15 números favoritos ou até 18 números para Lotofácil</li>
                                    <li>Varie entre números baixos e altos</li>
                                    <li>Use para facilitar múltiplas apostas</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Disclaimer de Transparência -->
                    <div style="background: rgba(244, 67, 54, 0.1); padding: 1.5rem; border-radius: 12px; margin: 2rem 0; border-left: 4px solid #f44336;">
                        <h3 style="color: #f44336; margin-bottom: 1rem;">⚠️ Informação Importante</h3>
                        <div style="line-height: 1.6;">
                            <p style="margin-bottom: 1rem;">
                                <strong>Estas são ferramentas de organização e análise histórica.</strong> 
                                Loterias são jogos de azar com probabilidades fixas e sorteios completamente aleatórios.
                            </p>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; font-size: 0.9rem;">
                                <div>
                                    <strong style="color: #4CAF50;">✓ O que essas ferramentas fazem:</strong>
                                    <ul style="margin: 0.5rem 0; padding-left: 1.2rem;">
                                        <li>Organizam números para facilitar apostas</li>
                                        <li>Mostram dados históricos retrospectivos</li>
                                        <li>Auxiliam na gestão de múltiplos jogos</li>
                                    </ul>
                                </div>
                                <div>
                                    <strong style="color: #f44336;">✗ O que NÃO fazem:</strong>
                                    <ul style="margin: 0.5rem 0; padding-left: 1.2rem;">
                                        <li>Aumentar chances de vitória</li>
                                        <li>Prever números futuros</li>
                                        <li>Garantir qualquer tipo de retorno</li>
                                    </ul>
                                </div>
                            </div>
                            
                                    <p style="margin: 1rem 0 0 0; font-size: 0.9rem; font-weight: bold;">
                                        Jogue com responsabilidade. Estabeleça limites de gastos. Loterias são entretenimento, não investimento.
                                    </p>
                                </div>
                            </div>
                    </section>

                    <!-- Compartilhamento --> 
                    <div class="share-container">
                        Compartilhe estas ferramentas: 
                        <a href="javascript:void(0)" onclick="compartilharWhatsApp(window.location.href)" class="share-btn whatsapp">
                            <i class="fa-brands fa-whatsapp"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="compartilharFacebook(window.location.href)" class="share-btn facebook">
                            <i class="fa-brands fa-facebook"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="compartilharTwitter(window.location.href)" class="share-btn twitter">
                            <i class="fa-brands fa-x-twitter"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="compartilharThreads(window.location.href)" class="share-btn threads">
                            <i class="fa-brands fa-threads"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="compartilharInstagram(window.location.href)" class="share-btn instagram">
                            <i class="fa-brands fa-instagram"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="compartilharTikTok(window.location.href)" class="share-btn tiktok">
                            <i class="fa-brands fa-tiktok"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="copiarLink(window.location.href)" class="share-btn copy-link">
                        <i class="fa-solid fa-link"></i>
                        </a>
                    </div>
                    <a href="#" class="voltar-topo">Voltar ao Topo ↑</a>
            </main>
                    <div id="footer"></div>
        </div>

                    <script defer src="/static/js/scripts.js"></script>

            <script>
                    // Configurações das loterias
                    const LOTTERY_CONFIG = {
                        'megasena': { min_num: 1, max_num: 60, num_bolas_sorteadas: 6, min_dezenas: 6, max_dezenas: 15 },
                        'quina': { min_num: 1, max_num: 80, num_bolas_sorteadas: 5, min_dezenas: 5, max_dezenas: 15 },
                        'lotofacil': { min_num: 1, max_num: 25, num_bolas_sorteadas: 15, min_dezenas: 15, max_dezenas: 18 },
                        'diadesorte': { min_num: 1, max_num: 31, num_bolas_sorteadas: 7, min_dezenas: 7, max_dezenas: 15 },
                        'duplasena': { min_num: 1, max_num: 50, num_bolas_sorteadas: 6, min_dezenas: 6, max_dezenas: 15 },
                        'lotomania': { min_num: 1, max_num: 100, num_bolas_sorteadas: 20, min_dezenas: 50, max_dezenas: 50 }
                    };

                    // Estado da aplicação
                    let numerosSelecionadosSimulador = new Set();
                    let numerosSelecionadosFechamento = new Set();
                    let loteriaAtualSimulador = 'megasena';
                    let loteriaAtualFechamento = 'megasena';

                    // Inicialização
                    document.addEventListener('DOMContentLoaded', function() {
                        inicializarSimulador();
                        inicializarFechamento();
                        adicionarEventListeners();
                    });

                    function inicializarSimulador() {
                        const loteria = document.getElementById('loteria-simulador').value;
                        loteriaAtualSimulador = loteria;
                        gerarGridNumeros('simulador', loteria);
                        atualizarContador('simulador');
                    }

                    function inicializarFechamento() {
                        const loteria = document.getElementById('loteria-fechamento').value;
                        loteriaAtualFechamento = loteria;
                        gerarGridNumeros('fechamento', loteria);
                        atualizarContador('fechamento');
                    }

                    function adicionarEventListeners() {
                        // Simulador
                        document.getElementById('loteria-simulador').addEventListener('change', function() {
                            numerosSelecionadosSimulador.clear();
                            inicializarSimulador();
                        });

                        document.getElementById('btn-simular').addEventListener('click', executarSimulacao);
                        document.getElementById('btn-limpar-simulador').addEventListener('click', function() {
                            limparSelecao('simulador');
                        });

                        // Fechamento
                        document.getElementById('loteria-fechamento').addEventListener('change', function() {
                            numerosSelecionadosFechamento.clear();
                            inicializarFechamento();
                        });

                        document.getElementById('btn-gerar-fechamento').addEventListener('click', gerarFechamento);
                        document.getElementById('btn-limpar-fechamento').addEventListener('click', function() {
                            limparSelecao('fechamento');
                        });
                    }

                    function gerarGridNumeros(tipo, loteria) {
                        const config = LOTTERY_CONFIG[loteria];
                        const grid = document.getElementById(`grid-numeros-${tipo}`);
                        const numeros = tipo === 'simulador' ? numerosSelecionadosSimulador : numerosSelecionadosFechamento;
                        
                        grid.innerHTML = '';

                        for (let i = config.min_num; i <= config.max_num; i++) {
                            const button = document.createElement('button');
                            button.className = 'numero-botao';
                            button.textContent = String(i).padStart(2, '0');
                            button.dataset.numero = i;
                            
                            if (numeros.has(i)) {
                                button.classList.add('selecionado');
                            }

                            button.addEventListener('click', function() {
                                toggleNumero(tipo, i);
                            });

                            grid.appendChild(button);
                        }
                    }

                    function toggleNumero(tipo, numero) {
                        const numeros = tipo === 'simulador' ? numerosSelecionadosSimulador : numerosSelecionadosFechamento;
                        const loteria = tipo === 'simulador' ? loteriaAtualSimulador : loteriaAtualFechamento;
                        const config = LOTTERY_CONFIG[loteria];
                        const button = document.querySelector(`#grid-numeros-${tipo} [data-numero="${numero}"]`);

                        if (numeros.has(numero)) {
                            numeros.delete(numero);
                            button.classList.remove('selecionado');
                        } else {
                            // Para o simulador, limitar ao número exato de dezenas
                            if (tipo === 'simulador' && numeros.size >= config.num_bolas_sorteadas) {
                                return;
                            }
                            // Para fechamento, permitir mais números
                            if (tipo === 'fechamento' && numeros.size >= config.max_dezenas) {
                                return;
                            }
                            numeros.add(numero);
                            button.classList.add('selecionado');
                        }

                        atualizarContador(tipo);
                        atualizarBotoes(tipo);
                    }

                    function atualizarContador(tipo) {
                        const numeros = tipo === 'simulador' ? numerosSelecionadosSimulador : numerosSelecionadosFechamento;
                        const loteria = tipo === 'simulador' ? loteriaAtualSimulador : loteriaAtualFechamento;
                        const config = LOTTERY_CONFIG[loteria];
                        const contador = document.getElementById(`contador-${tipo}`);

                        if (tipo === 'simulador') {
                            contador.textContent = `Selecione seus números: ${numeros.size} de ${config.num_bolas_sorteadas} escolhidos`;
                        } else {
                            const min = config.num_bolas_sorteadas + 1;
                            contador.textContent = `Selecione seus números favoritos: ${numeros.size} escolhidos (mínimo ${min} para fechamento)`;
                        }
                    }

                    function atualizarBotoes(tipo) {
                        const numeros = tipo === 'simulador' ? numerosSelecionadosSimulador : numerosSelecionadosFechamento;
                        const loteria = tipo === 'simulador' ? loteriaAtualSimulador : loteriaAtualFechamento;
                        const config = LOTTERY_CONFIG[loteria];
                        const botao = document.getElementById(tipo === 'simulador' ? 'btn-simular' : 'btn-gerar-fechamento');

                        if (tipo === 'simulador') {
                            botao.disabled = numeros.size !== config.num_bolas_sorteadas;
                        } else {
                            botao.disabled = numeros.size <= config.num_bolas_sorteadas;
                        }
                    }

                    function limparSelecao(tipo) {
                        const numeros = tipo === 'simulador' ? numerosSelecionadosSimulador : numerosSelecionadosFechamento;
                        const loteria = tipo === 'simulador' ? loteriaAtualSimulador : loteriaAtualFechamento;
                        
                        numeros.clear();
                        gerarGridNumeros(tipo, loteria);
                        atualizarContador(tipo);
                        atualizarBotoes(tipo);
                        
                        // Esconder resultados - CORREÇÃO: IDs corretos
                        if (tipo === 'simulador') {
                            document.getElementById('resultado-simulacao').style.display = 'none';
                        } else {
                            document.getElementById('resultado-fechamento').style.display = 'none';
                        }
                    }
                    async function executarSimulacao() {
                        const loading = document.getElementById('loading-simulador');
                        const resultado = document.getElementById('resultado-simulacao');
                        
                        loading.style.display = 'flex';
                        resultado.style.display = 'none';

                        try {
                            // Buscar TODOS os resultados (sem limite de 20)
                            const response = await fetch(`/get-todos-resultados?loteria=${loteriaAtualSimulador}`);
                            const resultados = await response.json();

                            if (resultados.error) {
                                throw new Error(resultados.error);
                            }

                            // Executar simulação com todos os concursos
                            const numerosEscolhidos = Array.from(numerosSelecionadosSimulador);
                            const simulacao = simularJogos(numerosEscolhidos, resultados, loteriaAtualSimulador);
                            
                            exibirResultadoSimulacao(simulacao, numerosEscolhidos, resultados);
                            
                        } catch (error) {
                            console.error('Erro na simulação:', error);
                            resultado.innerHTML = `
                                <div class="resultado-simulacao" style="border-left-color: var(--cor-erro);">
                                    <h3 style="color: var(--cor-erro);">Erro na Simulação</h3>
                                    <p>Não foi possível executar a simulação. Tente novamente.</p>
                                </div>
                            `;
                            resultado.style.display = 'block';
                        } finally {
                            loading.style.display = 'none';
                        }
                    }

                    function simularJogos(numerosEscolhidos, resultados, loteria) { // Adicione 'loteria' como parâmetro
                        const acertosPorConcurso = [];
                        let totalAcertosGeral = 0; // Somatório de acertos para a média
                        let melhorAcertoGeral = 0; // Melhor acerto em qualquer concurso/sorteio
                        const distribuicaoAcertos = {}; // Para a tabela de distribuição

                        resultados.forEach(concurso => {
                            let acertosNoConcurso = 0;
                            let numerosAcertadosNoConcurso = [];
                            let numerosSorteadosDisplay = concurso.dezenas; // Para exibir no TOP 10

                            if (loteria === 'duplasena') {
                                // Para Dupla Sena, as dezenas são 12 (6 do 1º sorteio, 6 do 2º)
                                const dezenasPrimeiroSorteio = concurso.dezenas.split(' ').slice(0, 6).map(n => parseInt(n));
                                const dezenasSegundoSorteio = concurso.dezenas.split(' ').slice(6, 12).map(n => parseInt(n));

                                const acertos1Sorteio = numerosEscolhidos.filter(n => dezenasPrimeiroSorteio.includes(n));
                                const acertos2Sorteio = numerosEscolhidos.filter(n => dezenasSegundoSorteio.includes(n));

                                // Considera o melhor acerto entre os dois sorteios para o resultado individual do concurso
                                if (acertos1Sorteio.length >= acertos2Sorteio.length) {
                                    acertosNoConcurso = acertos1Sorteio.length;
                                    numerosAcertadosNoConcurso = acertos1Sorteio;
                                    numerosSorteadosDisplay = dezenasPrimeiroSorteio.map(n => String(n).padStart(2, '0')).join(' ');
                                } else {
                                    acertosNoConcurso = acertos2Sorteio.length;
                                    numerosAcertadosNoConcurso = acertos2Sorteio;
                                    numerosSorteadosDisplay = dezenasSegundoSorteio.map(n => String(n).padStart(2, '0')).join(' ');
                                }

                            } else {
                                const numerossorteados = concurso.dezenas.split(' ').map(n => parseInt(n));
                                numerosAcertadosNoConcurso = numerosEscolhidos.filter(n => numerossorteados.includes(n));
                                acertosNoConcurso = numerosAcertadosNoConcurso.length;
                            }
                            
                            acertosPorConcurso.push({
                                concurso: concurso.concurso,
                                data: concurso.data,
                                numerossorteados: numerosSorteadosDisplay, // Pode ser o 1º sorteio para Dupla Sena
                                acertos: acertosNoConcurso,
                                numerosAcertados: numerosAcertadosNoConcurso.map(n => String(n).padStart(2, '0')).join(', ')
                            });

                            totalAcertosGeral += acertosNoConcurso;
                            melhorAcertoGeral = Math.max(melhorAcertoGeral, acertosNoConcurso);
                            distribuicaoAcertos[acertosNoConcurso] = (distribuicaoAcertos[acertosNoConcurso] || 0) + 1;
                        });

                            // Ordenar acertosPorConcurso do maior para o menor antes de retornar
                            acertosPorConcurso.sort((a, b) => b.acertos - a.acertos);

                            return {
                                acertos: acertosPorConcurso,
                                totalAcertos: totalAcertosGeral,
                                melhorAcerto: melhorAcertoGeral,
                                mediaAcertos: (totalAcertosGeral / resultados.length).toFixed(2),
                                distribuicaoAcertos,
                                totalConcursos: resultados.length
                            };
                        }

                function exibirResultadoSimulacao(simulacao, numerosEscolhidos, resultados) {
                    const resultado = document.getElementById('resultado-simulacao');
                    
                    // Ordenar por maior número de acertos e pegar os 5 primeiros
                    const maioresAcertos = simulacao.acertos
                        .sort((a, b) => b.acertos - a.acertos)
                        .slice(0, 5);
                    
                    let html = `
                        <div class="resultado-simulacao">
                            <h3><i class="fas fa-chart-line"></i> Resultado da Simulação</h3>
                            <p><strong>Seus números:</strong> ${numerosEscolhidos.map(n => String(n).padStart(2, '0')).join(', ')}</p>
                            
                            <div class="resumo-simulacao">
                                <div class="card-resumo">
                                    <h4>Total de Acertos</h4>
                                    <span class="numero-destaque">${simulacao.totalAcertos}</span>
                                    <p>em ${simulacao.totalConcursos} concursos</p>
                                </div>
                                <div class="card-resumo">
                                    <h4>Melhor Resultado</h4>
                                    <span class="numero-destaque">${simulacao.melhorAcerto}</span>
                                    <p>acertos em um concurso</p>
                                </div>
                                <div class="card-resumo">
                                    <h4>Média de Acertos</h4>
                                    <span class="numero-destaque">${simulacao.mediaAcertos}</span>
                                    <p>por concurso</p>
                                </div>
                            </div>

                            <h4 style="color: var(--cor-dourado); margin-top: 2rem;">Distribuição de Acertos</h4>
                            <table class="tabela-resultados">
                                <thead>
                                    <tr>
                                        <th>Acertos</th>
                                        <th>Frequência</th>
                                        <th>Porcentagem</th>
                                    </tr>
                                </thead>
                                <tbody>`;

                    const maxAcertos = Math.max(...Object.keys(simulacao.distribuicaoAcertos).map(k => parseInt(k)));
                    for (let i = maxAcertos; i >= 0; i--) {
                        const freq = simulacao.distribuicaoAcertos[i] || 0;
                        const perc = ((freq / simulacao.totalConcursos) * 100).toFixed(1);
                        html += `
                            <tr>
                                <td>${i}</td>
                                <td>${freq}</td>
                                <td>${perc}%</td>
                            </tr>`;
                    }

                        html += `
                                    </tbody>
                                </table>

                                <h4 style="color: var(--cor-dourado); margin-top: 2rem;">Top 5 Maiores Acertos</h4>
                                <table class="tabela-resultados">
                                    <thead>
                                        <tr>
                                            <th>Posição</th>
                                            <th>Concurso</th>
                                            <th>Data</th>
                                            <th>Números Sorteados</th>
                                            <th>Acertos</th>
                                            <th>Números Acertados</th>
                                        </tr>
                                    </thead>
                                    <tbody>`;

                        maioresAcertos.forEach((item, index) => {
                            const corLinha = item.acertos >= 4 ? 'style="background-color: rgba(76, 175, 80, 0.2);"' : 
                                        item.acertos >= 3 ? 'style="background-color: rgba(255, 193, 7, 0.2);"' : '';
                            html += `
                                <tr ${corLinha}>
                                    <td><strong>${index + 1}º</strong></td>
                                    <td>${item.concurso}</td>
                                    <td>${item.data}</td>
                                    <td>${item.numerossorteados}</td>
                                    <td><strong>${item.acertos}</strong></td>
                                    <td>${item.numerosAcertados || '-'}</td>
                                </tr>`;
                        });

                        html += `
                                    </tbody>
                                </table>
                            </div>
                        `;

                        resultado.innerHTML = html;
                        resultado.style.display = 'block';
                    }

                async function gerarFechamento() {
                    const loading = document.getElementById('loading-fechamento');
                    const resultado = document.getElementById('resultado-fechamento');
                    
                    loading.style.display = 'flex';
                    resultado.style.display = 'none';

                    try {
                        const numerosEscolhidos = Array.from(numerosSelecionadosFechamento);
                        const config = LOTTERY_CONFIG[loteriaAtualFechamento];
                        
                        // Gerar jogos de fechamento
                        const jogos = gerarJogosFechamento(numerosEscolhidos, config);
                        
                        exibirResultadoFechamento(jogos, numerosEscolhidos);
                        
                    } catch (error) {
                        console.error('Erro no fechamento:', error);
                        resultado.innerHTML = `
                            <div class="fechamento-resultado" style="border-left-color: var(--cor-erro);">
                                <h3 style="color: var(--cor-erro);">Erro no Fechamento</h3>
                                <p>Não foi possível gerar o fechamento. Tente novamente.</p>
                            </div>
                        `;
                        resultado.style.display = 'block';
                    } finally {
                        loading.style.display = 'none';
                    }
                }

                function gerarJogosFechamento(numerosEscolhidos, config) {
                    const jogos = [];
                    const maxJogos = 10;
                    const numerosPorJogo = config.num_bolas_sorteadas;
                    
                    if (numerosEscolhidos.length < numerosPorJogo) {
                        console.warn("Número de dezenas escolhidas é menor que o necessário para um jogo.");
                        return [];
                    }

                    // Caso especial: se escolheu exatamente o necessário para um jogo
                    if (numerosEscolhidos.length === numerosPorJogo) {
                        return [numerosEscolhidos.sort((a, b) => a - b)];
                    }

                    // === ALGORITMO OTIMIZADO DE FECHAMENTO ===
                    
                    // 1. Rastrear frequência de uso de cada número
                    const frequenciaUso = {};
                    numerosEscolhidos.forEach(n => frequenciaUso[n] = 0);
                    
                    const jogosSet = new Set(); // Evitar duplicatas
                    
                    // 2. Primeira rodada: garantir que todos os números apareçam pelo menos uma vez
                    const numerosRestantes = [...numerosEscolhidos];
                    
                    while (numerosRestantes.length >= numerosPorJogo && jogos.length < maxJogos) {
                        // Ordenar por menor frequência para priorizar números menos usados
                        numerosRestantes.sort((a, b) => frequenciaUso[a] - frequenciaUso[b]);
                        
                        // Pegar os menos usados
                        const jogo = numerosRestantes.slice(0, numerosPorJogo).sort((a, b) => a - b);
                        const jogoString = jogo.join(',');
                        
                        if (!jogosSet.has(jogoString)) {
                            jogosSet.add(jogoString);
                            jogos.push(jogo);
                            jogo.forEach(n => frequenciaUso[n]++);
                            
                            // Remover apenas o primeiro número usado para criar variação
                            numerosRestantes.shift();
                        } else {
                            break;
                        }
                    }
                    
                    // 3. Segunda rodada: gerar jogos balanceados priorizando combinações
                    let tentativas = 0;
                    const maxTentativas = 1000;
                    
                    while (jogos.length < maxJogos && tentativas < maxTentativas) {
                        tentativas++;
                        
                        // Dividir números em menos usados e mais usados
                        const ordenadosPorFrequencia = [...numerosEscolhidos]
                            .sort((a, b) => frequenciaUso[a] - frequenciaUso[b]);
                        
                        const menosUsados = ordenadosPorFrequencia.slice(0, Math.ceil(ordenadosPorFrequencia.length / 2));
                        const maisUsados = ordenadosPorFrequencia.slice(Math.ceil(ordenadosPorFrequencia.length / 2));
                        
                        // Criar jogo equilibrado: metade de cada grupo
                        const metadeJogo = Math.floor(numerosPorJogo / 2);
                        const jogo = [];
                        
                        // Adicionar números menos usados
                        const menosUsadosShuffled = [...menosUsados].sort(() => Math.random() - 0.5);
                        jogo.push(...menosUsadosShuffled.slice(0, metadeJogo));
                        
                        // Completar com números mais usados ou menos usados se necessário
                        const restante = numerosPorJogo - jogo.length;
                        const maisUsadosShuffled = [...maisUsados].sort(() => Math.random() - 0.5);
                        
                        for (let i = 0; i < maisUsadosShuffled.length && jogo.length < numerosPorJogo; i++) {
                            if (!jogo.includes(maisUsadosShuffled[i])) {
                                jogo.push(maisUsadosShuffled[i]);
                            }
                        }
                        
                        // Se ainda faltam números, preencher com qualquer um disponível
                        if (jogo.length < numerosPorJogo) {
                            for (const num of numerosEscolhidos) {
                                if (!jogo.includes(num)) {
                                    jogo.push(num);
                                    if (jogo.length === numerosPorJogo) break;
                                }
                            }
                        }
                        
                        jogo.sort((a, b) => a - b);
                        const jogoString = jogo.join(',');
                        
                        if (!jogosSet.has(jogoString) && jogo.length === numerosPorJogo) {
                            jogosSet.add(jogoString);
                            jogos.push(jogo);
                            jogo.forEach(n => frequenciaUso[n]++);
                        }
                    }
                
                    // 4. Terceira rodada: completar com jogos totalmente aleatórios se necessário
                    tentativas = 0;
                    while (jogos.length < maxJogos && tentativas < maxTentativas) {
                        tentativas++;
                        
                        const numerosShuffled = [...numerosEscolhidos].sort(() => Math.random() - 0.5);
                        const jogo = numerosShuffled.slice(0, numerosPorJogo).sort((a, b) => a - b);
                        const jogoString = jogo.join(',');
                        
                        if (!jogosSet.has(jogoString)) {
                            jogosSet.add(jogoString);
                            jogos.push(jogo);
                            jogo.forEach(n => frequenciaUso[n]++);
                        }
                    }
                
                    return jogos;
                }

                function exibirResultadoFechamento(jogos, numerosEscolhidos) {
                    const resultado = document.getElementById('resultado-fechamento');
                    
                    let html = `
                        <div class="fechamento-resultado">
                            <h3><i class="fas fa-magic"></i> Sistema de Organização</h3>
                            <p><strong>Seus números escolhidos:</strong> ${numerosEscolhidos.map(n => String(n).padStart(2, '0')).join(', ')}</p>
                            <p><strong>Jogos gerados:</strong> ${jogos.length}</p>
                            
                            <div style="margin-top: 2rem;">
                    `;

                    jogos.forEach((jogo, index) => {
                        html += `
                            <div class="jogo-fechamento">
                                <strong>Jogo ${index + 1}:</strong>
                                ${jogo.map(n => `<span class="numero-jogo">${String(n).padStart(2, '0')}</span>`).join('')}
                            </div>
                        `;
                    });

                    html += `
                            </div>
                            
                            <div style="margin-top: 2rem; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border-left: 4px solid var(--cor-aviso);">
                                <h4 style="color: var(--cor-aviso); margin-bottom: 0.5rem;">💡 Dica Importante</h4>
                                <p style="margin: 0; font-size: 1rem;">
                                    Este é um organizador que distribui seus números escolhidos entre os jogos gerados e gera 10 jogos. 
                                    Para um fechamento matemático mais avançado, considere usar ferramentas especializadas.
                                </p>
                            </div>
                        </div>
                    `;
                    

                    resultado.innerHTML = html;
                    resultado.style.display = 'block';
                }
                    
                // Inicializar quando a página carregar
                window.addEventListener('load', function() {
                    inicializarSimulador();
                    inicializarFechamento();
                });

            
                // Carregar footer se não estiver sendo carregado automaticamente
                fetch('/static/partials/footer.html')
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById('footer').innerHTML = html;
                    })
                    .catch(err => console.log('Footer não encontrado'));
        
            </script>
    </body>
</html>