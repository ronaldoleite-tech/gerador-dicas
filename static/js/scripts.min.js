let isRequestInProgress=!1,carregandoResultados=!1,graficos={maisSorteados:null,menosSorteados:null,primos:null,paresImpares:null,maisSorteadosRecentes:null,menosSorteadosRecentes:null};const meses=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];function getElement(e){return document.getElementById(e)}function getElements(e){return document.querySelectorAll(e)}function copiarNumeros(e){let t=e.closest(".jogo"),a="";(a=t?[...t.querySelectorAll(".numero")].map(e=>e.textContent).join(" "):e.getAttribute("data-copy-text"))&&navigator.clipboard.writeText(a).then(()=>{mostrarFeedbackCopia(e)}).catch(e=>{console.error("Falha ao copiar:",e),alert("Falha ao copiar. Por favor, copie manualmente: "+a)})}function mostrarFeedbackCopia(e){let t=e.innerHTML,a=e.style.background;e.innerHTML='<i class="fa-solid fa-check"></i>',e.closest(".jogo")||(e.innerHTML+=" Copiado!",e.style.background="var(--cor-sucesso)"),setTimeout(()=>{e.innerHTML=t,a?e.style.background=a:e.style.removeProperty("background")},2e3)}function setGeradorEstado(e){isRequestInProgress=e;let t=getElement("botao-gerar-principal");t&&(t.disabled=e),getElements(".seletor-custom, #numeros-ancora").forEach(t=>{t.disabled=e})}const compartilhamento={whatsapp(e,t){let a=encodeURIComponent(`${e} - ${t}`);window.open(`https://wa.me/?text=${a}`,"_blank")},facebook(e){window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"_blank")},twitter(e,t){let a=encodeURIComponent(`${e} ${t}`);window.open(`https://twitter.com/intent/tweet?text=${a}`,"_blank")},threads(e,t){let a=encodeURIComponent(`${e} ${t}`);window.open(`https://www.threads.net/intent/post?text=${a}`,"_blank")},instagram(){confirm("Para compartilhar no Instagram:\n\n1. Abra o Instagram\n2. Crie uma nova publica\xe7\xe3o ou story\n3. Marque @sorteanalisadaoficial\n4. Use a hashtag #SorteAnalisada\n\nDeseja abrir o Instagram?")&&window.open("https://www.instagram.com/sorteanalisadaoficial?igsh=cW8zenNycWVieXF1","_blank")},tiktok(){confirm("Para compartilhar no TikTok:\n\n1. Abra o TikTok\n2. Crie um v\xeddeo mencionando a Sorte Analisada\n3. Use a hashtag #SorteAnalisada\n4. Marque @sorteanalisadaoficial\n\nDeseja abrir o TikTok?")&&window.open("https://www.tiktok.com/","_blank")}};function compartilharWhatsApp(e){let t=document.title||"Sorte Analisada";compartilhamento.whatsapp(t,e)}function compartilharFacebook(e){compartilhamento.facebook(e)}function compartilharTwitter(e){let t=document.title||"Sorte Analisada";compartilhamento.twitter(t,e)}function compartilharThreads(e){let t=document.title||"Sorte Analisada";compartilhamento.threads(t,e)}function compartilharInstagram(){compartilhamento.instagram()}function compartilharTikTok(){compartilhamento.tiktok()}function copiarLink(e,t){navigator.clipboard.writeText(e).then(()=>{let e=t?.target?.closest(".share-btn");if(e){let a=e.innerHTML;e.innerHTML='<i class="fa-solid fa-check"></i> Copiado!',e.style.background="var(--cor-sucesso)",setTimeout(()=>{e.innerHTML=a,e.style.background="#6c757d"},2e3)}}).catch(t=>{console.error("Falha ao copiar:",t);let a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select();try{document.execCommand("copy"),alert("Link copiado!")}catch(o){alert("Falha ao copiar. Por favor, copie manualmente: "+e)}document.body.removeChild(a)})}async function submitFeedback(e){let t=getElement("feedback-area"),a=getElement("feedback-message");if(t&&a)try{let o=await fetch("/submit-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({choice:e})});if(!o.ok)throw Error("Falha ao enviar.");a.textContent="Obrigado pelo seu feedback!",a.style.color="#81C784",t.querySelectorAll("button").forEach(e=>{e.disabled=!0})}catch(r){a.textContent="Erro ao enviar. Tente novamente.",a.style.color="#ff8a80"}}function carregarFooter(){let e=getElement("footer");e&&fetch("/static/partials/footer.html").then(e=>e.text()).then(t=>{e.innerHTML=t}).catch(e=>console.error("Erro ao carregar rodap\xe9:",e))}let chartJSLoaded=!1;function loadChartJS(){return chartJSLoaded?Promise.resolve():new Promise((e,t)=>{let a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js",a.onload=()=>{chartJSLoaded=!0,e()},a.onerror=t,document.head.appendChild(a)})}function configurarDropdowns(){let e=document.querySelectorAll(".dropdown");e.forEach(t=>{let a=t.querySelector("a:first-child");a.addEventListener("click",a=>{a.preventDefault(),e.forEach(e=>{e!==t&&e.classList.remove("active")}),t.classList.toggle("active")})}),document.querySelectorAll(".dropdown-content a").forEach(t=>{t.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active"))})}),document.addEventListener("click",t=>{t.target.closest(".dropdown")||e.forEach(e=>e.classList.remove("active"))})}document.addEventListener("DOMContentLoaded",function(){carregarFooter(),configurarDropdowns(),document.querySelectorAll(".share-btn.copy-link").forEach(e=>{e.addEventListener("click",function(t){let a=e.dataset.url||window.location.href;copiarLink(a,t)})})});